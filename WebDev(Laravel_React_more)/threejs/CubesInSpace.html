<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
    </style>
    <script type="importmap">
        {
          "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@v0.164.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@v0.164.0/examples/jsm/"
          }
        }
      </script>
</head>
<body>
    

    <script type = "module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import {setRandomPosition, getBlock,rotate,onResize} from "./modules.js";

        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000 );
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );
        document.body.appendChild(renderer.domElement);  

        const controls = new OrbitControls(camera, renderer.domElement);
        camera.position.z = 10;
       

       
        scene.add(new THREE.AxesHelper( 5 ));

        scene.add(new THREE.GridHelper(10, 10));
        

        let blocks=[];
        for (let i = 0; i < 5000; i++) {
            const block = getBlock(0.2, 0.2, 0.2, 0xffffff);
            setRandomPosition(block);
            scene.add(block);
            blocks.push(block);
        }
       
        
        const lightRed = new THREE.DirectionalLight(0xff0000, 1); 
        lightRed.position.set(1,0,0);
        scene.add(lightRed);

        const lightGreen = new THREE.DirectionalLight(0x008000, 1);
        lightGreen.position.set(0,1,0);
        scene.add(lightGreen);

        const lightBlue = new THREE.DirectionalLight(0x0000ff, 1); 
        scene.add(lightBlue);
        lightBlue.position.set(0,0,1);

       

        (function animate() {
            onResize(camera,renderer);
            blocks.forEach(block => {
               rotate(block);
            });
            requestAnimationFrame( animate );
            renderer.render(scene, camera);
        })();

    </script>
</body>
</html>